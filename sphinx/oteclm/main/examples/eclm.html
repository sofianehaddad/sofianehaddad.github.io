
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Extended Common Load Modelling : example &#8212; otECLM 0.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/openturns.css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Developer guide" href="../developer_guide/developer_guide.html" />
    <link rel="prev" title="Examples" href="examples.html" />
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300,400,700'
          rel='stylesheet' type='text/css' />
 

  </head><body>
<div class="pageheader">
  <ul>
    <li><a href="../index.html">Home</a></li>
    <li><a href="../user_manual/user_manual.html">Doc</a></li>
    <li><a href="examples.html">Examples</a></li>
  </ul>
  <a href="../index.html">
    <h1>
      <img src="../_static/logo-openturns-wo-bg.png" alt="" width=100px height=100px />
      otECLM
    </h1>
    <h2> Module otECLM </h2>
  </a>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../developer_guide/developer_guide.html" title="Developer guide"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="examples.html" title="Examples"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">otECLM 0.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="examples.html" accesskey="U">Examples</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Extended Common Load Modelling : example</a></li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h3><a href="../index.html">Table of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../user_manual/user_manual.html">API Reference</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="examples.html">Examples</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Extended Common Load Modelling : example</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../developer_guide/developer_guide.html">Developer guide</a></li>
</ul>

  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="examples.html"
                          title="previous chapter">Examples</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="../developer_guide/developer_guide.html"
                          title="next chapter">Developer guide</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/examples/eclm.ipynb"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container div.prompt *,
div.nboutput.container div.prompt *,
div.nbinput.container div.input_area pre,
div.nboutput.container div.output_area pre,
div.nbinput.container div.input_area .highlight,
div.nboutput.container div.output_area .highlight {
    border: none;
    padding: 0;
    margin: 0;
    box-shadow: none;
}

div.nbinput.container > div[class*=highlight],
div.nboutput.container > div[class*=highlight] {
    margin: 0;
}

div.nbinput.container div.prompt *,
div.nboutput.container div.prompt * {
    background: none;
}

div.nboutput.container div.output_area .highlight,
div.nboutput.container div.output_area pre {
    background: unset;
}

div.nboutput.container div.output_area div.highlight {
    color: unset;  /* override Pygments text color */
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    /*background: #f5f5f5;*/
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
    margin: 0;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt .copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
.jp-RenderedHTMLCommon table,
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
.jp-RenderedHTMLCommon thead,
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
.jp-RenderedHTMLCommon tr,
.jp-RenderedHTMLCommon th,
.jp-RenderedHTMLCommon td,
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
.jp-RenderedHTMLCommon th,
div.rendered_html th {
  font-weight: bold;
}
.jp-RenderedHTMLCommon tbody tr:nth-child(odd),
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
.jp-RenderedHTMLCommon tbody tr:hover,
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}
</style>
<section id="Extended-Common-Load-Modelling-:-example">
<h1>Extended Common Load Modelling : example<a class="headerlink" href="#Extended-Common-Load-Modelling-:-example" title="Permalink to this heading">Â¶</a></h1>
<p>Import the required modules</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">matplotlib</span> inline
<span class="kn">import</span> <span class="nn">openturns</span> <span class="k">as</span> <span class="nn">ot</span>
<span class="kn">import</span> <span class="nn">otECLM</span>
<span class="kn">from</span> <span class="nn">openturns.viewer</span> <span class="kn">import</span> <span class="n">View</span>
</pre></div>
</div>
</div>
<p>We consider a common cause failure (CCF) groupe with <em>n=7</em> identical and independent components. The total impact vector of this CCF group is estimated after N=1002100 demands or tests on the group.</p>
<div class="math">
<p><img src="_images/math/8df06b7520ac9f62703b8248831a7a6ef440f4eb.svg" alt="V_t^{n,N} = [1000000, 2000, 200, 30, 20, 5, 0, 0]"/></p>
</div><div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">n</span> <span class="o">=</span> <span class="mi">7</span>
<span class="n">vectImpactTotal</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">Indices</span><span class="p">(</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
<span class="n">vectImpactTotal</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1000000</span>
<span class="n">vectImpactTotal</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2000</span>
<span class="n">vectImpactTotal</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">200</span>
<span class="n">vectImpactTotal</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mi">30</span>
<span class="n">vectImpactTotal</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="mi">20</span>
<span class="n">vectImpactTotal</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span>
<span class="n">vectImpactTotal</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">vectImpactTotal</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
</pre></div>
</div>
</div>
<p>Create the ECLM class. We will use the Gauss Legendre quadrature algorithm to compute all the integrals of the ECLM model. The use of 50 points is sufficicient to reach a good precision.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">myECLM</span> <span class="o">=</span> <span class="n">otECLM</span><span class="o">.</span><span class="n">ECLM</span><span class="p">(</span><span class="n">vectImpactTotal</span><span class="p">,</span> <span class="n">ot</span><span class="o">.</span><span class="n">GaussLegendre</span><span class="p">([</span><span class="mi">50</span><span class="p">]))</span>
</pre></div>
</div>
</div>
<p><strong>Estimate the optimal parameter</strong></p>
<p>We use the Mankamo assumption. We use the maximum likelihood estimators of the <em>Mankamo parameter</em>. We want to get all the graphs of the likelihood function at the optimal Mankamo parameter.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">startingPoint</span> <span class="o">=</span> <span class="p">[</span><span class="mf">5.0e-5</span><span class="p">,</span> <span class="mf">0.51</span><span class="p">,</span> <span class="mf">0.85</span><span class="p">]</span>
<span class="n">visuLikelihood</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">mankamoParam</span><span class="p">,</span> <span class="n">generalParam</span><span class="p">,</span> <span class="n">finalLogLikValue</span><span class="p">,</span> <span class="n">graphesCol</span> <span class="o">=</span> <span class="n">myECLM</span><span class="o">.</span><span class="n">estimateMaxLikelihoodFromMankamo</span><span class="p">(</span><span class="n">startingPoint</span><span class="p">,</span> <span class="n">visuLikelihood</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Mankamo parameter : &#39;</span><span class="p">,</span> <span class="n">mankamoParam</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;general parameter : &#39;</span><span class="p">,</span> <span class="n">generalParam</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;finalLogLikValue : &#39;</span><span class="p">,</span> <span class="n">finalLogLikValue</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Production of graphs
graph (Cco, Cx) = (Cco_optim, Cx_optim)
graph (logPx, Cx) = (logPx_optim, Cx_optim)
graph (logPx, Cco) = (logPx_optim, Cco_optim)
graph Cx = Cx_optim
graph Cco = Cco_optim
graph logPx = logPx_optim
Mankamo parameter :  [0.00036988020585009376, 8.04135557919943e-05, 0.3409699644984777, 0.3409699654984777]
general parameter :  [0.9996142333562342, 0.16968721302373846, 0.16968721340130874, 0.23590853774338646, 0.7640914622566135]
finalLogLikValue :  -21715.8714091196
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">gl</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">GridLayout</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">):</span>
    <span class="n">gl</span><span class="o">.</span><span class="n">setGraph</span><span class="p">(</span><span class="n">i</span><span class="o">//</span><span class="mi">3</span><span class="p">,</span> <span class="n">i</span><span class="o">%</span><span class="k">3</span>, graphesCol[i])
<span class="n">gl</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
/home/maison/.local/lib/python3.8/site-packages/openturns/viewer.py:442: UserWarning: No contour levels were found within the data range.
  contourset = self._ax[0].contour(X, Y, Z, **contour_kw)
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../_images/examples_eclm_9_1.png" src="../_images/examples_eclm_9_1.png" />
</div>
</div>
<p><strong>Compute the ECLM probabilities</strong></p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">PEG_list</span> <span class="o">=</span> <span class="n">myECLM</span><span class="o">.</span><span class="n">computePEGall</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;PEG_list = &#39;</span><span class="p">,</span> <span class="n">PEG_list</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>

<span class="n">PSG_list</span> <span class="o">=</span> <span class="n">myECLM</span><span class="o">.</span><span class="n">computePSGall</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;PSG_list = &#39;</span><span class="p">,</span> <span class="n">PSG_list</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>

<span class="n">PES_list</span> <span class="o">=</span> <span class="n">myECLM</span><span class="o">.</span><span class="n">computePESall</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;PES_list = &#39;</span><span class="p">,</span> <span class="n">PES_list</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>

<span class="n">PTS_list</span> <span class="o">=</span> <span class="n">myECLM</span><span class="o">.</span><span class="n">computePTSall</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;PTS_list = &#39;</span><span class="p">,</span> <span class="n">PTS_list</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
PEG_list =  [0.9977951319717163, 0.00028436502415618765, 5.6292962755304796e-06, 1.2524690066143626e-06, 7.155524783440694e-07, 6.762697760203756e-07, 1.0052559693098889e-06, 2.465736909085783e-06]

PSG_list =  [0.9999964873085601, 0.00036988020585010346, 3.330188060788197e-05, 1.4659058362438232e-05, 8.225866623420648e-06, 5.152518623725936e-06, 3.4709928783956725e-06, 2.465736909085783e-06]

PES_list =  [0.9977951319717163, 0.0019905551690933138, 0.00011821522178614006, 4.383641523150269e-05, 2.504433674204243e-05, 1.4201665296427888e-05, 7.036791785169222e-06, 2.465736909085783e-06]

PTS_list =  [0.99999648730856, 0.0022013553368436817, 0.00021080016775036807, 9.258494596422802e-05, 4.874853073272532e-05, 2.370419399068289e-05, 9.502528694255006e-06, 2.465736909085783e-06]
</pre></div></div>
</div>
<p><strong>Generate a sample of the parameters by Bootstrap</strong></p>
<p>We use the bootstrap sampling to get a sample of total impact vectors. Each total impact vector value is associated to an optimal Mankamo parameter and an optimal general parameter. We fix the size of the bootstrap sample. We also fix the number of realisations after which the sample is saved. Each optimisation problem is initalised with the optimal parameter found for the total impact vector.</p>
<p>The sample is generated and saved in a csv file.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">Nbootstrap</span> <span class="o">=</span> <span class="mi">100</span>
<span class="n">blockSize</span> <span class="o">=</span> <span class="mi">256</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">startingPoint</span> <span class="o">=</span> <span class="n">mankamoParam</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">4</span><span class="p">]</span>
<span class="n">fileNameSampleParam</span> <span class="o">=</span> <span class="s1">&#39;sampleParamFromMankamo_</span><span class="si">{}</span><span class="s1">.csv&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">Nbootstrap</span><span class="p">)</span>
<span class="n">myECLM</span><span class="o">.</span><span class="n">estimateBootstrapParamSampleFromMankamo</span><span class="p">(</span><span class="n">Nbootstrap</span><span class="p">,</span> <span class="n">startingPoint</span><span class="p">,</span> <span class="n">blockSize</span><span class="p">,</span> <span class="n">fileNameSampleParam</span><span class="p">)</span>
<br/></pre></div>
</div>
</div>
<p>Create the sample of all the ECLM probabilities associated to the sample of the parameters.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fileNameECLMProbabilities</span> <span class="o">=</span> <span class="s1">&#39;sampleECLMProbabilitiesFromMankamo_</span><span class="si">{}</span><span class="s1">.csv&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">Nbootstrap</span><span class="p">)</span>
<span class="n">myECLM</span><span class="o">.</span><span class="n">computeECLMProbabilitiesFromMankano</span><span class="p">(</span><span class="n">blockSize</span><span class="p">,</span> <span class="n">fileNameSampleParam</span><span class="p">,</span> <span class="n">fileNameECLMProbabilities</span><span class="p">)</span>
<br/></pre></div>
</div>
</div>
<p><strong>Graphically analyse the bootstrap sample of parameters</strong></p>
<p>We create the Pairs graphs of the Mankamo and general parameters.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">graphPairsMankamoParam</span><span class="p">,</span> <span class="n">graphPairsGeneralParam</span><span class="p">,</span> <span class="n">graphMarg_list</span><span class="p">,</span> <span class="n">descParam</span> <span class="o">=</span> <span class="n">myECLM</span><span class="o">.</span><span class="n">analyse_graphsECLMParam</span><span class="p">(</span><span class="n">fileNameSampleParam</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">graphPairsMankamoParam</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../_images/examples_eclm_19_0.png" src="../_images/examples_eclm_19_0.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">graphPairsGeneralParam</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../_images/examples_eclm_20_0.png" src="../_images/examples_eclm_20_0.png" />
</div>
</div>
<p>We estimate the distribution of each parameter with a Histogram and a normal kernel smoothing.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">gl</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">GridLayout</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
<span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">graphMarg_list</span><span class="p">)):</span>
    <span class="n">gl</span><span class="o">.</span><span class="n">setGraph</span><span class="p">(</span><span class="n">k</span><span class="o">//</span><span class="mi">3</span><span class="p">,</span> <span class="n">k</span><span class="o">%</span><span class="k">3</span>, graphMarg_list[k])
<span class="n">gl</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../_images/examples_eclm_22_0.png" src="../_images/examples_eclm_22_0.png" />
</div>
</div>
<p><strong>Graphically analyse the bootstrap sample of the ECLM probabilities</strong></p>
<p>We create the Pairs graphs of all the ECLM probabilities. We limit the graphical study to the multiplicities lesser than <img class="math" src="_images/math/e63c9c2255fb14d1026afbfd9ecccc37cbf3723f.svg" alt="k_{max}" style="vertical-align: -2px"/>.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">kMax</span> <span class="o">=</span> <span class="mi">5</span>

<span class="n">graphPairs_list</span><span class="p">,</span> <span class="n">graphPEG_PES_PTS_list</span><span class="p">,</span> <span class="n">graphMargPEG_list</span><span class="p">,</span> <span class="n">graphMargPSG_list</span><span class="p">,</span> <span class="n">graphMargPES_list</span><span class="p">,</span> <span class="n">graphMargPTS_list</span><span class="p">,</span> <span class="n">desc_list</span> <span class="o">=</span> <span class="n">myECLM</span><span class="o">.</span><span class="n">analyse_graphsECLMProbabilities</span><span class="p">(</span><span class="n">fileNameECLMProbabilities</span><span class="p">,</span> <span class="n">kMax</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">descPairs</span> <span class="o">=</span> <span class="n">desc_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">descPEG_PES_PTS</span> <span class="o">=</span> <span class="n">desc_list</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="n">descMargPEG</span> <span class="o">=</span> <span class="n">desc_list</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
<span class="n">descMargPSG</span> <span class="o">=</span> <span class="n">desc_list</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
<span class="n">descMargPES</span> <span class="o">=</span> <span class="n">desc_list</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
<span class="n">descMargPTS</span> <span class="o">=</span> <span class="n">desc_list</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[23]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">graphPairs_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[23]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../_images/examples_eclm_26_0.png" src="../_images/examples_eclm_26_0.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[24]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">graphPairs_list</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[24]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../_images/examples_eclm_27_0.png" src="../_images/examples_eclm_27_0.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[25]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">graphPairs_list</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[25]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../_images/examples_eclm_28_0.png" src="../_images/examples_eclm_28_0.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[26]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">graphPairs_list</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[26]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../_images/examples_eclm_29_0.png" src="../_images/examples_eclm_29_0.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[38]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Fix a k &lt;=kMax</span>
<span class="n">k</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">graphPEG_PES_PTS_list</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[38]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../_images/examples_eclm_30_0.png" src="../_images/examples_eclm_30_0.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[40]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">len</span><span class="p">(</span><span class="n">graphMargPEG_list</span><span class="p">)</span>
<span class="n">gl</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">GridLayout</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
<span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">graphMargPEG_list</span><span class="p">)):</span>
    <span class="n">gl</span><span class="o">.</span><span class="n">setGraph</span><span class="p">(</span><span class="n">k</span><span class="o">//</span><span class="mi">3</span><span class="p">,</span> <span class="n">k</span><span class="o">%</span><span class="k">3</span>, graphMargPEG_list[k])
<span class="n">gl</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[40]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../_images/examples_eclm_31_0.png" src="../_images/examples_eclm_31_0.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[41]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">gl</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">GridLayout</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
<span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">graphMargPSG_list</span><span class="p">)):</span>
    <span class="n">gl</span><span class="o">.</span><span class="n">setGraph</span><span class="p">(</span><span class="n">k</span><span class="o">//</span><span class="mi">3</span><span class="p">,</span> <span class="n">k</span><span class="o">%</span><span class="k">3</span>, graphMargPSG_list[k])
<span class="n">gl</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[41]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../_images/examples_eclm_32_0.png" src="../_images/examples_eclm_32_0.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[42]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">gl</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">GridLayout</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
<span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">graphMargPES_list</span><span class="p">)):</span>
    <span class="n">gl</span><span class="o">.</span><span class="n">setGraph</span><span class="p">(</span><span class="n">k</span><span class="o">//</span><span class="mi">3</span><span class="p">,</span> <span class="n">k</span><span class="o">%</span><span class="k">3</span>, graphMargPES_list[k])
<span class="n">gl</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[42]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../_images/examples_eclm_33_0.png" src="../_images/examples_eclm_33_0.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[43]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">gl</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">GridLayout</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
<span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">graphMargPTS_list</span><span class="p">)):</span>
    <span class="n">gl</span><span class="o">.</span><span class="n">setGraph</span><span class="p">(</span><span class="n">k</span><span class="o">//</span><span class="mi">3</span><span class="p">,</span> <span class="n">k</span><span class="o">%</span><span class="k">3</span>, graphMargPTS_list[k])
<span class="n">gl</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[43]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../_images/examples_eclm_34_0.png" src="../_images/examples_eclm_34_0.png" />
</div>
</div>
<p><strong>Fit a distribution to the ECLM probabilities</strong></p>
<p>We fit a distribution among a given list to each ECLM probability. We test it with the Lilliefors test. We also compute the confidence interval of the specified level.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[44]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">factoryColl</span> <span class="o">=</span> <span class="p">[</span><span class="n">ot</span><span class="o">.</span><span class="n">BetaFactory</span><span class="p">(),</span> <span class="n">ot</span><span class="o">.</span><span class="n">LogNormalFactory</span><span class="p">(),</span> <span class="n">ot</span><span class="o">.</span><span class="n">GammaFactory</span><span class="p">()]</span>
<span class="n">confidenceLevel</span> <span class="o">=</span> <span class="mf">0.9</span>
<span class="n">IC_list</span><span class="p">,</span> <span class="n">graphMarg_list</span><span class="p">,</span> <span class="n">descMarg_list</span> <span class="o">=</span> <span class="n">myECLM</span><span class="o">.</span><span class="n">analyse_distECLMProbabilities</span><span class="p">(</span><span class="n">fileNameECLMProbabilities</span><span class="p">,</span> <span class="n">kMax</span><span class="p">,</span> <span class="n">confidenceLevel</span><span class="p">,</span> <span class="n">factoryColl</span><span class="p">)</span>

<span class="n">IC_PEG_list</span><span class="p">,</span> <span class="n">IC_PSG_list</span><span class="p">,</span> <span class="n">IC_PES_list</span><span class="p">,</span> <span class="n">IC_PTS_list</span> <span class="o">=</span> <span class="n">IC_list</span>
<span class="n">graphMargPEG_list</span><span class="p">,</span> <span class="n">graphMargPSG_list</span><span class="p">,</span> <span class="n">graphMargPES_list</span><span class="p">,</span> <span class="n">graphMargPTS_list</span> <span class="o">=</span> <span class="n">graphMarg_list</span>
<span class="n">descMargPEG</span><span class="p">,</span> <span class="n">descMargPSG</span><span class="p">,</span> <span class="n">descMargPES</span><span class="p">,</span> <span class="n">descMargPTS</span> <span class="o">=</span> <span class="n">descMarg_list</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Test de Lilliefors
==================

Ordre k= 0
Best model PEG( 0 |n) :  Gamma(k = 38292.5, lambda = 3.86051e+06, gamma = 0.987852) p-value =  0.6095717884130982
Best model PSG( 0 |n) :  Gamma(k = 1.65362e+08, lambda = 1.6863e+10, gamma = 0.990193) p-value =  0.000999000999000999
Best model PES( 0 |n) :  Gamma(k = 38292.5, lambda = 3.86051e+06, gamma = 0.987852) p-value =  0.5893520429219975
Best model PTS( 0 |n) :  Gamma(k = 1.65362e+08, lambda = 1.6863e+10, gamma = 0.990193) p-value =  0.0

Test de Lilliefors
==================

Ordre k= 1
Best model PEG( 1 |n) :  LogNormal(muLog = -8.64607, sigmaLog = 0.0411927, gamma = 0.00011188) p-value =  0.955044955044955
Best model PSG( 1 |n) :  Beta(alpha = 2.0922, beta = 2.36032, a = 0.000351093, b = 0.000392658) p-value =  0.6560565870910698
Best model PES( 1 |n) :  LogNormal(muLog = -6.70016, sigmaLog = 0.0411927, gamma = 0.000783163) p-value =  0.957042957042957
Best model PTS( 1 |n) :  Beta(alpha = 2.1325, beta = 2.77135, a = 0.00211989, b = 0.00236849) p-value =  0.34291938997821353

Test de Lilliefors
==================

Ordre k= 2
Best model PEG( 2 |n) :  Gamma(k = 0.775858, lambda = 699424, gamma = 4.89624e-06) p-value =  0.000999000999000999
Best model PSG( 2 |n) :  Beta(alpha = 1.92551, beta = 2.00875, a = 2.19526e-05, b = 3.76405e-05) p-value =  0.000999000999000999
Best model PES( 2 |n) :  Gamma(k = 0.775858, lambda = 33305.9, gamma = 0.000102821) p-value =  0.001998001998001998
Best model PTS( 2 |n) :  Gamma(k = 2.14449, lambda = 52481.2, gamma = 0.000172207) p-value =  0.001998001998001998

Test de Lilliefors
==================

Ordre k= 3
Best model PEG( 3 |n) :  Gamma(k = 1.91599, lambda = 4.82553e+06, gamma = 9.39583e-07) p-value =  0.000999000999000999
Best model PSG( 3 |n) :  Beta(alpha = 1.14471, beta = 0.725516, a = 4.05913e-06, b = 1.63951e-05) p-value =  0.0
Best model PES( 3 |n) :  LogNormal(muLog = -11.1906, sigmaLog = 0.579775, gamma = 3.04455e-05) p-value =  0.0
Best model PTS( 3 |n) :  LogNormal(muLog = -6.15486, sigmaLog = 0.0034539, gamma = -0.0020362) p-value =  0.30274361400189215

Test de Lilliefors
==================

Ordre k= 4
Best model PEG( 4 |n) :  Beta(alpha = 1.94039, beta = 1.79465, a = 4.09873e-07, b = 8.5115e-07) p-value =  0.0
Best model PSG( 4 |n) :  Beta(alpha = 0.858763, beta = 0.468984, a = 7.69779e-07, b = 8.93246e-06) p-value =  0.0
Best model PES( 4 |n) :  Beta(alpha = 1.94039, beta = 1.79465, a = 1.43455e-05, b = 2.97903e-05) p-value =  0.0
Best model PTS( 4 |n) :  LogNormal(muLog = 1.17054, sigmaLog = 3.32463e-06, gamma = -3.22368) p-value =  0.000999000999000999

Test de Lilliefors
==================

Ordre k= 5
Best model PEG( 5 |n) :  Beta(alpha = 1.02753, beta = 0.604467, a = 1.02441e-07, b = 7.77886e-07) p-value =  0.0
Best model PSG( 5 |n) :  LogNormal(muLog = -1.49978, sigmaLog = 7.67547e-06, gamma = -0.223176) p-value =  0.000999000999000999
Best model PES( 5 |n) :  Beta(alpha = 1.02753, beta = 0.604467, a = 2.15125e-06, b = 1.63356e-05) p-value =  0.0
Best model PTS( 5 |n) :  Beta(alpha = 0.908442, beta = 0.506423, a = 2.27641e-06, b = 2.64569e-05) p-value =  0.0

</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[45]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">IC_PEG_list</span><span class="p">)):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;IC_PEG_&#39;</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="s1">&#39; = &#39;</span><span class="p">,</span> <span class="n">IC_PEG_list</span><span class="p">[</span><span class="n">k</span><span class="p">])</span>

<span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">IC_PSG_list</span><span class="p">)):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;IC_PSG_&#39;</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="s1">&#39; = &#39;</span><span class="p">,</span> <span class="n">IC_PSG_list</span><span class="p">[</span><span class="n">k</span><span class="p">])</span>

<span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">IC_PES_list</span><span class="p">)):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;IC_PES_&#39;</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="s1">&#39; = &#39;</span><span class="p">,</span> <span class="n">IC_PES_list</span><span class="p">[</span><span class="n">k</span><span class="p">])</span>

<span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">IC_PTS_list</span><span class="p">)):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;IC_PTS_&#39;</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="s1">&#39; = &#39;</span><span class="p">,</span> <span class="n">IC_PTS_list</span><span class="p">[</span><span class="n">k</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
IC_PEG_ 0  =  [0.997684, 0.997861]
IC_PEG_ 1  =  [0.000274683, 0.000301107]
IC_PEG_ 2  =  [4.98728e-06, 8.90577e-06]
IC_PEG_ 3  =  [1.01043e-06, 1.94417e-06]
IC_PEG_ 4  =  [4.41542e-07, 7.8566e-07]
IC_PEG_ 5  =  [1.12323e-07, 7.16122e-07]
IC_PSG_ 0  =  [0.999998, 1]
IC_PSG_ 1  =  [0.000354533, 0.000386447]
IC_PSG_ 2  =  [2.30372e-05, 3.48791e-05]
IC_PSG_ 3  =  [4.3629e-06, 1.50937e-05]
IC_PSG_ 4  =  [8.25574e-07, 8.22555e-06]
IC_PSG_ 5  =  [1.37716e-07, 5.01132e-06]
IC_PES_ 0  =  [0.997684, 0.997861]
IC_PES_ 1  =  [0.00192278, 0.00210775]
IC_PES_ 2  =  [0.000104733, 0.000187021]
IC_PES_ 3  =  [3.53654e-05, 6.80458e-05]
IC_PES_ 4  =  [1.54541e-05, 2.74977e-05]
IC_PES_ 5  =  [2.35879e-06, 1.50386e-05]
IC_PTS_ 0  =  [0.999998, 1]
IC_PTS_ 1  =  [0.00213786, 0.00231474]
IC_PTS_ 2  =  [0.000178868, 0.000273956]
IC_PTS_ 3  =  [7.35802e-05, 9.97068e-05]
IC_PTS_ 4  =  [1.80019e-05, 5.18137e-05]
IC_PTS_ 5  =  [2.49489e-06, 2.4346e-05]
</pre></div></div>
</div>
<p>We draw all the estimated distributions and the title gives the best model.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[46]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">gl</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">GridLayout</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
<span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">graphMargPEG_list</span><span class="p">)):</span>
    <span class="n">gl</span><span class="o">.</span><span class="n">setGraph</span><span class="p">(</span><span class="n">k</span><span class="o">//</span><span class="mi">3</span><span class="p">,</span> <span class="n">k</span><span class="o">%</span><span class="k">3</span>, graphMargPEG_list[k])
<span class="n">gl</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[46]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../_images/examples_eclm_39_0.png" src="../_images/examples_eclm_39_0.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[47]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">gl</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">GridLayout</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
<span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">graphMargPSG_list</span><span class="p">)):</span>
    <span class="n">gl</span><span class="o">.</span><span class="n">setGraph</span><span class="p">(</span><span class="n">k</span><span class="o">//</span><span class="mi">3</span><span class="p">,</span> <span class="n">k</span><span class="o">%</span><span class="k">3</span>, graphMargPSG_list[k])
<span class="n">gl</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[47]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../_images/examples_eclm_40_0.png" src="../_images/examples_eclm_40_0.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[48]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">gl</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">GridLayout</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
<span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">graphMargPES_list</span><span class="p">)):</span>
        <span class="n">gl</span><span class="o">.</span><span class="n">setGraph</span><span class="p">(</span><span class="n">k</span><span class="o">//</span><span class="mi">3</span><span class="p">,</span> <span class="n">k</span><span class="o">%</span><span class="k">3</span>, graphMargPES_list[k])
<span class="n">gl</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[48]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../_images/examples_eclm_41_0.png" src="../_images/examples_eclm_41_0.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[49]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">gl</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">GridLayout</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
<span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">graphMargPTS_list</span><span class="p">)):</span>
    <span class="n">gl</span><span class="o">.</span><span class="n">setGraph</span><span class="p">(</span><span class="n">k</span><span class="o">//</span><span class="mi">3</span><span class="p">,</span> <span class="n">k</span><span class="o">%</span><span class="k">3</span>, graphMargPTS_list[k])
<span class="n">gl</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[49]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../_images/examples_eclm_42_0.png" src="../_images/examples_eclm_42_0.png" />
</div>
</div>
<p><strong>Analyse the minimal multiplicity which probability is greater than a given threshold</strong></p>
<p>We fix <em>p</em> and we get the minimal multiplicity <img class="math" src="_images/math/e63c9c2255fb14d1026afbfd9ecccc37cbf3723f.svg" alt="k_{max}" style="vertical-align: -2px"/> such that :</p>
<div class="math">
<p><img src="_images/math/0e6742f0e8c5cd06c54419dc894d4f8e1e0ed66b.svg" alt="k_{max} = \arg\max \{k| \mbox{PTS}(k|n) \geq p \}"/></p>
</div><div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[50]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="o">=</span> <span class="mf">1.0e-5</span>
<span class="n">nameSeuil</span> <span class="o">=</span> <span class="s1">&#39;10M5&#39;</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[51]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">kMax</span> <span class="o">=</span> <span class="n">myECLM</span><span class="o">.</span><span class="n">computeKMax_PTS</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;kMax = &#39;</span><span class="p">,</span> <span class="n">kMax</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
kMax =  5
</pre></div></div>
</div>
<p>Then we use the bootstrap sample of the Mankamo parameters to generate a sample of <img class="math" src="_images/math/e63c9c2255fb14d1026afbfd9ecccc37cbf3723f.svg" alt="k_{max}" style="vertical-align: -2px"/>. We analyse the distribution of <img class="math" src="_images/math/e63c9c2255fb14d1026afbfd9ecccc37cbf3723f.svg" alt="k_{max}" style="vertical-align: -2px"/>: we estimate it with the empirical distribution and we derive a confidence interval of order <img class="math" src="_images/math/71635c8d8ccc8234c0ef6d79cdf88a14f8de8253.svg" alt="90\%" style="vertical-align: -1px"/>.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[52]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fileNameSampleParam</span> <span class="o">=</span> <span class="s1">&#39;sampleParamFromMankamo_</span><span class="si">{}</span><span class="s1">.csv&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">Nbootstrap</span><span class="p">)</span>
<span class="n">fileNameSampleKmax</span> <span class="o">=</span> <span class="s1">&#39;sampleKmaxFromMankamo_</span><span class="si">{}</span><span class="s1">_</span><span class="si">{}</span><span class="s1">.csv&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">Nbootstrap</span><span class="p">,</span> <span class="n">nameSeuil</span><span class="p">)</span>
<span class="n">gKmax</span> <span class="o">=</span> <span class="n">myECLM</span><span class="o">.</span><span class="n">computeAnalyseKMaxSample</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">blockSize</span><span class="p">,</span> <span class="n">fileNameSampleParam</span><span class="p">,</span> <span class="n">fileNameSampleKmax</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Intervalle de confiance de niveau 90%: [ 4.0 ,  5.0 ]
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[34]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">gKmax</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[34]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../_images/examples_eclm_48_0.png" src="../_images/examples_eclm_48_0.png" />
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
</div>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../developer_guide/developer_guide.html" title="Developer guide"
             >next</a> |</li>
        <li class="right" >
          <a href="examples.html" title="Examples"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">otECLM 0.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="examples.html" >Examples</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Extended Common Load Modelling : example</a></li> 
      </ul>
    </div>
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>

  </body>
</html>